/* AvatarUI ImitSelect | By Rocky | 2013-03-28 */
define(function(require){
require('avatarui_css/avatarui_imitselect.css?20130328');
$.fn.ImitSelect=function(g){function k(b){c.showSelectUlCallback(a);a.find(".selectUl li").removeClass("even");a.find(".selectUl li").filter(":even").addClass("even");var d=a.find(".selectUl").html(),d=d.replaceAll("<b>",""),d=d.replaceAll("</b>","");a.find(".selectUl").html(d);if(a.find(".selectBtn").hasClass("selectBtnDown"))"toggle"==b&&(a.find(".selectBtn").removeClass("selectBtnDown"),a.find(".selectUl").slideUp(150),f());else{a.find(".selectUl").find("a").removeClass("selected searched");a.find(".selectUl").find("input").removeAttr("checked");if(""!=a.find(".selectInputName").val()){var e=a.find(".selectInputName").val().split(",");a.find(".selectUl a").each(function(){var a=$(this).find("span").html();e.contains(a)&&($(this).find("input").attr("checked","checked"),$(this).addClass("selected"))});e.length==a.find(".selectUl a").length&&a.find(".selectedAll input").attr("checked","checked")}a.find(".selectBtn").addClass("selectBtnDown");a.find(".selectUl").slideDown(200)}}function f(){var b=[];a.find(".selectUl a").each(function(){if($(this).hasClass("selected")){var a=$(this).attr("thisname");b.push(a)}});a.find(".selectInputName").val(b);if(!0==c.showTip){$("#ImitSelectTip_"+e).find(".tipArrow").remove();for(var d=a.offset(),h="",i=0;i<b.length;i++)h+='<li><a href="javascript:;" class="delSelect">x</a><span>'+b[i]+"</span></li>";$("#ImitSelectTip_"+e).find(".tipCon").html("<b>\u5df2\u9009\u9879\uff1a</b><ul>"+h+"</ul>");$("#ImitSelectTip_"+e).css({top:d.top-$("#ImitSelectTip_"+e).outerHeight()-8-$("body").scrollTop(),left:d.left}).show();$("#ImitSelectTip_"+e).append('<span class="tipArrow tipArrow1"></span><span class="tipArrow"></span>');$("#ImitSelectTip_"+e).find(".tipArrow").css("left",c.selectWidth-20)}}var c=$.extend({},{selectWidth:150,selectUlWidth:"auto",selectUlHeight:"",selectUlNum:12,option:[],selectedOptionId:[],selectedOptionName:[],onloadCallback:function(){},selectedCallback:function(){},removeCallback:function(){},unSelectCallback:function(){},selectedType:"",showSelectedAll:!1,showTip:!1,selectTipWidth:150,showSelectUlCallback:function(){},selectInputKeyupCallback:function(){}},g),a=$(this);a.html("");Array.prototype.indexOf=function(a){for(var d=0;d<this.length;d++)if(this[d]==a)return d;return-1};Array.prototype.remove=function(a){a=this.indexOf(a);-1<a&&this.splice(a,1)};Array.prototype.contains=function(a){for(var d=0;d<this.length;d++)if(this[d]==a)return!0;return!1};String.prototype.trim=function(){return this.replace(/^\s*|\s*$/g,"")};a.append('<div class="imitSelect"><a href="javascript:;" class="selectBtn"></a><input type="text" class="selectInputName" val="" /><input type="hidden" class="selectInputId" /><div class="selectUl"><ul></ul></div></div>');a.find(".imitSelect").css("width",c.selectWidth);a.find(".selectInputName").css("width",c.selectWidth-24);if(!0==c.showTip){var e=$(this).attr("id");0==$("#ImitSelectTip_"+e).length&&($("body").append('<div id="ImitSelectTip_'+e+'" class="imitSelectTip"><div class="tipInner"><div class="tipCon"></div></div></div>'),$("#ImitSelectTip_"+e).width(c.selectTipWidth),$("#ImitSelectTip_"+e).find(".tipInner").width(c.selectTipWidth+2),$("#ImitSelectTip_"+e).find(".tipCon").width(c.selectTipWidth-6));$("#ImitSelectTip_"+e).mouseleave(function(){var a=$(this);timeO=setTimeout(function(){a.hide()},1E3)});$("#ImitSelectTip_"+e).mouseenter(function(){clearTimeout(timeO);$(this).show()})}"single"!=c.selectedType&&!0==c.showSelectedAll&&(a.find(".selectUl").append('<div class="selectedAll" style="position:absolute; top:0; left:0; height:20px; font-size:12px; line-height:20px; background:#f8f8f8; border:1px solid #838790; border-bottom:none; " ><input type="checkbox" style="float:left; margin:4px 3px 0 4px; display:inline;"/> \u5168\u9009</div>'),a.find(".selectUl .selectedAll").css({width:c.selectUlWidth}),a.find(".selectUl ul").css("margin-top","20px"),a.find(".selectedAll input").live("click",function(){if($(this).prop("checked")){var b=[];a.find(".selectUl a").each(function(){$(this).find("input").attr("checked","checked");$(this).addClass("selected");b.push($(this).find("span").html().trim())});a.find(".selectInputName").val(b)}else a.find(".selectInputName").val(""),a.find(".selectUl ul a").removeClass("selected"),a.find(".selectUl input").removeAttr("checked"),c.unSelectCallback()}));$.each(c.option,function(b,d){if(!RegExp('[?]').test(d.name)){var e="";"single"!=c.selectedType&&(e='<input type="checkbox"/>');a.find(".selectUl ul").append('<li><a href="javascript:;" thisid="'+d.id+'" thisname="'+d.name+'">'+e+"<span>"+d.name+"</span></a></li>");}});g=""==c.selectUlHeight?c.option.length<c.selectUlNum?28*c.option.length:28*c.selectUlNum:c.selectUlHeight;a.find(".selectUl ul").css({width:c.selectUlWidth,height:g});var j=[];0!=c.selectedOptionName.length?$.each(c.selectedOptionName,function(a,d){j.push(d)}):0!=c.selectedOptionId.length&&a.find(".selectUl a").each(function(){c.selectedOptionId.contains($(this).attr("thisid"))&&j.push($(this).find("span").html())});a.find(".selectInputName").val(j);a.find(".selectUl li").filter(":even").addClass("even");c.onloadCallback(a);a.find(".selectBtn").die().live("click",function(){k("toggle")});a.find(".selectInputName").die().live("click",function(){k()});a.find(".selectInputName").bind("keyup",function(){c.selectInputKeyupCallback(a);var b=a.find(".selectUl").html(),b=b.replaceAll("<b>",""),b=b.replaceAll("</b>","");a.find(".selectUl").html(b);var d=$(this).val(),b=a.find(".selectUl").find("span");""!=d&&(b.each(function(){var c=$(this).html().trim();if(RegExp(d.toUpperCase()).test(c)){var b=$(this).html(),b=b.replaceAll(d.toUpperCase(),"<b>"+d.toUpperCase()+"</b>");$(this).html(b);$(this).addClass("selected");b=a.find(".selectUl ul");$(this).parents("li").prependTo(b)}RegExp(d.toLowerCase()).test(c)&&(b=$(this).html(),b=b.replaceAll(d.toLowerCase(),"<b>"+d.toLowerCase()+"</b>"),$(this).html(b),b=a.find(".selectUl ul"),$(this).parents("li").prependTo(b))}),a.find(".selectUl li").removeClass("even"),a.find(".selectUl li").filter(":even").addClass("even"))});$("#ImitSelectTip_"+e+" li a").bind("click",function(){var b=$(this).attr("thisname"),d=a.find(".selectInputName").val().split(",");d.remove(b);a.find(".selectInputName").val(d);a.find(".selectUl a").each(function(){$(this).find("span").html().trim()==b&&($(this).find("input").removeAttr("checked"),$(this).removeClass("selected"))});c.removeCallback("",b);$(this).parent().remove()});a.find(".selectUl a").die().live("click",function(){$(this).find("span").html().trim();"single"==c.selectedType?(a.find(".selectUl a").removeClass("selected"),$(this).addClass("selected"),a.find(".selectBtn").removeClass("selectBtnDown"),a.find(".selectUl").slideUp(150),f(),c.selectedCallback($(this).attr("thisid"),$(this).attr("thisname"))):$(this).hasClass("selected")?($(this).find("input").removeAttr("checked"),$(this).removeClass("selected"),f(),c.removeCallback($(this).attr("thisid"),$(this).attr("thisname"))):($(this).find("input").attr("checked","checked"),$(this).addClass("selected"),f(),c.selectedCallback($(this).attr("thisid"),$(this).attr("thisname")));a.find(".selectInputName").val().split(",").length==a.find(".selectUl a").length?a.find(".selectedAll input").attr("checked","checked"):a.find(".selectedAll input").removeAttr("checked")});$(document).bind("mousedown",function(b){!$(b.target).closest(".imitSelect").is("div")&&!a.find(".selectUl").is(":hidden")&&!$(b.target).closest(".imitSelectTip").is("div")&&(a.find(".selectBtn").removeClass("selectBtnDown"),a.find(".selectUl").slideUp(150),f(),$("#ImitSelectTip_"+e).hide())})};
$.fn.Chosen=function(l){var b=$.extend({},{data:[],keywordsPlaceholder:"\u5173\u952e\u5b57\u641c\u7d22\u2026",valueWidth:"auto",chosenConWidth:200,dataListHeight:280,isSearch:!0,searchBack:!1,searchAjaxURL:"",beforeFillData:function(){},initCallback:function(){},selectedVal:[],selectedCallback:function(){},removeCallback:function(){},initTip:"",clearSelected:!1,multi:!1,multiCol:!1,maxSize:5,maxSizeTip:"",joinChar:","},l),k=b.clearSelected?40:20;Array.prototype.indexOf=function(a){for(var b=0,d=this.length;b<d;b++)if(this[b]==a)return b;return-1};Array.prototype.remove=
function(a){a=this.indexOf(a);-1<a&&this.splice(a,1)};var i={_init:function(){var f=b.valueWidth-k-6;a.append('<div class="dataSelected" style="padding-right:'+k+'px"><label class="fixedTextInit">'+b.initTip+"</label>"+(b.multi?b.multiCol?'<a href="javascript:;" class="fixedText"></a>':'<div class="dataSelectedCon"></div>':'<a href="javascript:;" class="fixedText"></a>')+'<input type="hidden" class="fixedId" /><input type="hidden" class="fixedVal" /><a href="javascript:;" class="clearSelected"></a><b class="chosenArrow"></b></div><div class="chosenCon"><div class="searchKeyword"><input type="text" class="keywords" autocomplete="off" placeholder="'+b.keywordsPlaceholder+'" /><div class="dataList keywordsDataList"><ul></ul></div></div><div class="dataList dataListAll"><ul></ul></div></div>');
"number"==typeof b.valueWidth&&(a.find(".dataSelected").width(f),a.find(".dataSelected .fixedText").width(f));b.beforeFillData(a,b.data);b.isSearch&&(b.searchBack?i.keywordsSearchBack():5<b.data.length&&i.keywordsSearch());b.chosenConWidth&&a.find(".chosenCon").width(b.chosenConWidth);var e=a.find(".dataListAll").find("ul");$.each(b.data,function(a,b){/[?]/.test(b.name)||e.append('<li thisid="'+b.id+'" thisval="'+b.name+'">'+b.name+"</li>")});if(0<b.selectedVal.length){var d=[];$.each(b.selectedVal,
function(a,b){e.find("li").each(function(){var a=$(this).attr("thisval"),c=$(this).attr("thisid");a==b&&d.push(c)})});if(b.multi&&!b.multiCol)for(var f=0,c=d.length;f<c;f++)a.find(".dataSelectedCon").append('<span class="item" thisid="'+d[f]+'" thisval="'+b.selectedVal[f]+'"><a href="javascript:;" class="itemText">'+b.selectedVal[f]+'</a><a href="javascript:;" class="delItem"></a></span>');else a.find(".fixedText").html(b.selectedVal.join(b.joinChar));a.find(".fixedId").val(d.join(b.joinChar));a.find(".fixedVal").val(b.selectedVal.join(b.joinChar))}e.find("li").filter(":odd").addClass("odd");
i._bind()},_selectedMove:function(b){var e=a.find(".dataListAll").is(":hidden")?a.find(".keywordsDataList"):a.find(".dataListAll"),d=e.find("li").length;e.find("li.hover").removeClass("hover");e.find("li").eq(h).addClass("hover");var c=e.find("li").eq(h);"down"==b?h<d-1&&h++:0<h&&h--;b=c.outerHeight();c=c.position().top;b+c>e.height()?e.scrollTop(e.scrollTop()+c+b-e.height()):0>c&&e.scrollTop(e.scrollTop()+c)},keywordsSearch:function(){a.find(".searchKeyword").show();a.find(".searchKeyword .keywords").width(b.chosenConWidth-
20);var f=a.find(".dataListAll"),e=a.find(".keywordsDataList"),d=a.find(".keywordsDataList ul");a.find(".keywords").keyup(function(c){switch(c.keyCode){case 13:case 16:case 17:case 37:case 38:case 39:case 40:break;case 27:break;default:h=0;var c=$(this).val(),g;""!=c?(g=c,f.hide(),e.show(),d.html(""),/([(])/.test(c)&&(g=c.replace(/(\()/,"\\$1")),/([)])/.test(c)&&(g=c.replace(/(\))/,"\\$1")),/([[])/.test(c)&&(g=c.replace(/(\[)/,"\\$1")),/([]])/.test(c)&&(g=c.replace(/(\])/,"\\$1")),f.find("li").each(function(){var c=
$(this).attr("thisval"),e=$(this).html(),f=$(this).attr("thisid");if(RegExp(g,"i").test(c)){var e=e.replace(eval("/("+g+")/gi"),"<b>$1</b>"),j=-1<a.find(".fixedId").val().split(b.joinChar).indexOf(f)?"active":"";d.append('<li thisid="'+f+'" thisval="'+c+'" class="'+j+'">'+e+"</li>")}}),d.find("li").length||d.append('<li>\u6ca1\u6709<b>"'+c+'"</b>\u7684\u76f8\u5173\u7ed3\u679c\u3002</li>'),d.find("li").filter(":odd").addClass("odd"),c=d.height(),e.height(c>b.dataListHeight?b.dataListHeight:c),a.find(".dataList li").hover(function(){$(this).addClass("hover")},
function(){$(this).removeClass("hover")})):(f.show(),e.hide().find("ul").html(""));var j=a.find(".fixedId").val().split(b.joinChar);a.find(".dataList li").each(function(){-1<j.indexOf($(this).attr("thisid"))&&$(this).addClass("active")})}})},keywordsSearchBack:function(){a.find(".searchKeyword").append('<a href="javascript:;" class="btn btnPrimary keywordsSearch">\u641c \u7d22</a>');a.find(".searchKeyword").show();a.find(".searchKeyword .keywords").width(b.chosenConWidth-20);var f=a.find(".dataListAll"),
e=a.find(".keywordsDataList"),d=a.find(".keywordsDataList ul");a.find(".keywords").keyup(function(a){switch(a.keyCode){case 13:case 16:case 17:case 37:case 38:case 39:case 40:break;case 27:break;default:""!=$(this).val()?(f.hide(),e.show(),$(".keywordsSearch").addClass("keywordsSearchActive")):($(".keywordsSearch").removeClass("keywordsSearchActive"),f.show(),e.hide().find("ul").html(""))}});a.find(".keywordsSearch").click(function(){if($(this).hasClass("keywordsSearchActive")){d.html('<div style="padding:5px;">\u6b63\u5728\u641c\u7d22...</div>');
var c=a.find(".keywords").val();keyword=c;var g=$.extend({},b.ajaxData,{keywords:"keywords=%"+keyword.toLowerCase()+"%"});$.ajax({url:b.searchAjaxURL,data:g,dataType:"json",success:function(g){$(".keywordsSearch").removeClass("keywordsSearchActive");d.html("");0==g.length?d.append('<li>\u6ca1\u6709<b>"'+c+'"</b>\u7684\u76f8\u5173\u7ed3\u679c\u3002</li>'):($.each(g,function(a,b){/[?]/.test(b.name)||d.append('<li thisid="'+b.id+'" thisval="'+b.name+'">'+b.name+"</li>")}),d.find("li").filter(":odd").addClass("odd"),
a.find(".dataList li").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}));g=d.height();e.height(g>b.dataListHeight?b.dataListHeight:g)}})}})},_bind:function(){var f=a.find(".dataListAll"),e=f.find("ul");a.find(".dataSelected").hover(function(){$(this).addClass("dataSelectedHover");var b=a.find(".dataSelectedCon").outerHeight();a.find(".dataSelected").css("height",24>b?24:b)},function(){a.find(".chosenCon").is(":hidden")&&($(this).removeClass("dataSelectedHover"),
a.find(".dataSelected").css("height",24))});b.clearSelected&&a.find(".clearSelected").die().live("click",function(d){b.multi?(a.find(".dataSelectedCon").html(""),a.find(".dataSelected").height(24),a.find(".chosenCon").css("top",25),b.multiCol&&a.find(".fixedText").html("").removeAttr("title")):a.find(".fixedText").html("").removeAttr("title");a.find(".dataList li").removeClass("active");a.find(".fixedTextInit").show();a.find(".fixedId").val("");a.find(".fixedVal").val("");$(this).hide();!a.find(".chosenCon").is(":hidden")&&
"number"!=typeof b.valueWidth&&(a.find(".dataSelected").outerWidth()>a.find(".chosenCon").outerWidth()?(a.find(".dataSelected").removeClass("dataSelectedActiveFFF"),a.find(".chosenCon").addClass("chosenConFFF")):(a.find(".dataSelected").addClass("dataSelectedActiveFFF"),a.find(".chosenCon").removeClass("chosenConFFF")));d.stopPropagation()});a.find(".dataSelected").die().live("click",function(){if(a.find(".chosenCon").is(":hidden")){$(this).outerWidth()>a.find(".chosenCon").outerWidth()?($(this).removeClass("dataSelectedActiveFFF"),
a.find(".chosenCon").addClass("chosenConFFF")):($(this).addClass("dataSelectedActiveFFF"),a.find(".chosenCon").removeClass("chosenConFFF"));$(this).addClass("dataSelectedActive");a.find(".chosenCon").show();a.find(".keywords").focus();a.find(".dataList li.active").removeClass("active");if(!a.find(".dataListAll").is(":hidden")){h=0;var d=e.outerHeight();f.height(d>b.dataListHeight?b.dataListHeight:d)}var c=a.find(".fixedId").val().split(b.joinChar);a.find(".dataList li").each(function(){-1!=c.indexOf($(this).attr("thisid"))&&
$(this).addClass("active")});d=a.find(".dataSelectedCon").outerHeight();d=24>d?24:d;a.find(".dataSelected").css("height",d);a.find(".chosenCon").css("top",d+1);a.find(".chosenArrow").addClass("chosenArrowUp")}else a.find(".dataSelected").removeClass("dataSelectedActive"),a.find(".chosenCon").hide(),a.find(".dataSelected").removeClass("dataSelectedActiveFFF"),a.find(".chosenCon").addClass("chosenConFFF"),a.find(".dataSelected").height(24),a.find(".chosenArrow").removeClass("chosenArrowUp")});a.find(".dataList li").hover(function(){$(this).addClass("hover")},
function(){$(this).removeClass("hover")});$(document).unbind("mousedown.Chosen");$(document).bind("mousedown.Chosen",function(a){var b=$(a.target).closest(".chosen");0==b.length?($(".dataSelected").removeClass("dataSelectedActive dataSelectedActiveFFF dataSelectedHover").height(24),$(".chosenCon").hide().addClass("chosenConFFF"),$(".chosenArrow").removeClass("chosenArrowUp")):$(".chosen").each(function(){$(this).attr("id")!=b.attr("id")&&($(this).find(".dataSelected").removeClass("dataSelectedActive dataSelectedActiveFFF dataSelectedHover").height(24),
$(this).find(".chosenCon").hide().addClass("chosenConFFF"),$(this).find(".chosenArrow").removeClass("chosenArrowUp"))})});a.find(".dataList li").die().live("click",function(){var d=$(this).attr("thisid"),c=$(this).attr("thisval");if(b.multi){if($(this).hasClass("active")){var e=a.find(".fixedVal").val().split(b.joinChar),f=a.find(".fixedId").val().split(b.joinChar);e.remove(c);f.remove(d);a.find(".fixedVal").val(e.join(b.joinChar));a.find(".fixedId").val(f.join(b.joinChar));b.multiCol?a.find(".fixedText").html(e.join(b.joinChar)):
a.find(".dataSelectedCon .item").each(function(){if($(this).attr("thisid")==d)return $(this).remove(),0==a.find(".dataSelectedCon .item").length&&(a.find(".fixedTextInit").show(),b.clearSelected&&a.find(".clearSelected").hide()),!1});$(this).removeClass("active");b.removeCallback(d,c,a)}else{if(a.find(".fixedId").val().split(b.joinChar).length==b.maxSize){""==b.maxSizeTip?alert("\u53ea\u80fd\u9009\u62e9 "+b.maxSize+" \u9879\uff01"):alert(b.maxSizeTip);return}""!=a.find(".fixedVal").val()?(a.find(".fixedVal").val(a.find(".fixedVal").val()+
b.joinChar+c),a.find(".fixedId").val(a.find(".fixedId").val()+b.joinChar+d)):(a.find(".fixedVal").val(c),a.find(".fixedId").val(d));b.multiCol?a.find(".fixedText").html(a.find(".fixedVal").val()).attr("title",a.find(".fixedVal").val()):a.find(".dataSelectedCon").append('<span class="item" thisid="'+d+'" thisval="'+c+'"><a href="javascript:;" class="itemText">'+c+'</a><a href="javascript:;" class="delItem"></a></span>');a.find(".fixedTextInit").hide();b.clearSelected&&a.find(".clearSelected").show();
$(this).addClass("active");b.selectedCallback(d,c,a)}c=a.find(".dataSelectedCon").outerHeight();c=24>c?24:c;a.find(".dataSelected").css("height",c);a.find(".chosenCon").css("top",c+1);"number"!=typeof b.valueWidth&&(a.find(".dataSelected").outerWidth()>a.find(".chosenCon").outerWidth()?(a.find(".dataSelected").removeClass("dataSelectedActiveFFF"),a.find(".chosenCon").addClass("chosenConFFF")):(a.find(".dataSelected").addClass("dataSelectedActiveFFF"),a.find(".chosenCon").removeClass("chosenConFFF")))}else a.find(".fixedVal").val(c),
a.find(".fixedId").val(d),a.find(".fixedText").html(c).attr("title",c),a.find(".dataSelected").removeClass("dataSelectedActive dataSelectedHover dataSelectedActiveFFF"),b.clearSelected&&a.find(".clearSelected").show(),a.find(".chosenArrow").removeClass("chosenArrowUp"),a.find(".fixedTextInit").hide(),a.find(".chosenCon").hide(),b.selectedCallback(d,c,a)});a.find(".delItem").die().live("click",function(d){var c=$(this).parent().attr("thisid"),e=$(this).parent().attr("thisval");$(this).parent().remove();
var f=a.find(".fixedVal").val().split(b.joinChar),h=a.find(".fixedId").val().split(b.joinChar);f.remove(e);h.remove(c);a.find(".fixedVal").val(f.join(b.joinChar));a.find(".fixedId").val(h.join(b.joinChar));a.find(".dataList li").each(function(){$(this).attr("thisid")==c&&$(this).removeClass("active")});f=a.find(".dataSelectedCon").outerHeight();f=24>f?24:f;a.find(".chosenCon").css("top",f+1);!a.find(".chosenCon").is(":hidden")&&"number"!=typeof b.valueWidth&&(a.find(".dataSelected").outerWidth()>
a.find(".chosenCon").outerWidth()?(a.find(".dataSelected").removeClass("dataSelectedActiveFFF"),a.find(".chosenCon").addClass("chosenConFFF")):(a.find(".dataSelected").addClass("dataSelectedActiveFFF"),a.find(".chosenCon").removeClass("chosenConFFF")));a.find(".fixedId").val().split(b.joinChar).length||(b.clearSelected&&a.find(".clearSelected").hide(),a.find(".fixedTextInit").show());b.removeCallback(c,e,a);d.stopPropagation()});a.find(".keywords").die().live("keydown",function(d){switch(d.keyCode){case 38:i._selectedMove("up");
break;case 40:i._selectedMove("down");break;case 13:a.find(".dataSelected").removeClass("dataSelectedActive");a.find(".chosenCon").hide();var c=a.find(".dataList li.hover"),d=c.attr("thisid"),c=c.attr("thisval");if(d){if(b.multi){""!=a.find(".fixedVal").val()?(a.find(".fixedVal").val(a.find(".fixedVal").val()+b.joinChar+c),a.find(".fixedId").val(a.find(".fixedId").val()+b.joinChar+d)):(a.find(".fixedVal").val(c),a.find(".fixedId").val(d));b.multiCol?a.find(".fixedText").html(a.find(".fixedVal").val()).attr("title",
a.find(".fixedVal").val()):a.find(".dataSelectedCon").append('<span class="item" thisid="'+d+'" thisval="'+c+'"><a href="javascript:;" class="itemText">'+c+'</a><a href="javascript:;" class="delItem"></a></span>');a.find(".fixedTextInit").hide();var e=a.find(".dataSelectedCon").outerHeight(),e=24>e?24:e;a.find(".dataSelected").css("height",e);a.find(".chosenCon").css("top",e+1)}else a.find(".fixedVal").val(c),a.find(".fixedId").val(d),a.find(".fixedText").html(c).attr("title",c),a.find(".dataSelected").removeClass("dataSelectedActive dataSelectedActiveFFF"),
a.find(".fixedTextInit").hide(),a.find(".chosenCon").hide();b.selectedCallback(d,c,a)}}})}},a=$(this),h=0;a.html("").addClass("chosen");i._init();b.initCallback(a)};
});