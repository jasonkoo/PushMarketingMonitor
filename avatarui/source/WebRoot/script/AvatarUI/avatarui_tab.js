/* AvatarUI Tab | By Rocky | 2013-03-28 */
define(function(require){
	require('avatarui_css/avatarui_tab.css?20130328');
	$.fn.Tab=function(i){function g(){var a=b.find(".tabNav li"),c=b.find(".tabCon");a.eq(d.tabShowIndex).addClass("active");c.eq(d.tabShowIndex).show();a.each(function(b){$(this).bind(d.changeType,function(){c.hide().eq(b).show();a.removeClass("active").eq(b).addClass("active");d.activeCallback(b)})})}function j(){var a=b.find(".tabNav li");b.find(".tabCon");a.each(function(){$(this).find("a").css("padding-right",25);$(this).append('<div class="tabDel">X</div>');h($(this))})}function h(a){a.find(".tabDel").click(function(){var c=a.find("a").html();if(confirm('\u786e\u8ba4\u8981\u5220\u9664 "'+c+'" \u5417?')){var c=b.find(".tabNav li"),f=b.find(".tabCon"),e=c.index(a);a.hasClass("active")&&(c.length>e+1?(c.removeClass("active").eq(e+1).addClass("active"),f.hide().eq(e+1).show()):(c.removeClass("active").eq(e-1).addClass("active"),f.hide().eq(e-1).show()));c.eq(e).remove();f.eq(e).remove();d.delCallback(e)}})}var d=$.extend({},{changeType:"click",activeCallback:function(){},addTab:!1,addCallback:function(){},delTab:!1,delCallback:function(){},tabShowIndex:0},i),b=$(this);g();d.delTab&&j();!0==d.addTab&&b.find(".addTab").click(function(){var a=b.find(".tab li"),c=b.find(".tabCon");a.removeClass("active");a=$('<li class="active"><a href="javascript:;">tab</a></li>');a.appendTo(b.find(".tab ul"));c.hide();$('<div class="tabCon"></div>').appendTo(b);a.find("a").css("padding-right",25);a.append('<div class="tabDel">X</div>');h(a);g();c=b.find(".tabNav li").length;d.addCallback(c-1)})};
});